{{ define "main" }}
<style>
  .ro-wrap{max-width:1200px;margin:0 auto;padding:2rem 1.25rem}
  .ro-tagline{font-size:1.15rem;line-height:1.6;margin-bottom:1rem;color:var(--bf-fg,#333);opacity:.9}

  .ro-hero{position:relative;border-radius:14px;overflow:hidden}
  .ro-hero-link{display:block;position:relative}
  .ro-hero img{
    position:absolute;inset:0;
    width:100%;
    height:clamp(240px,55vw,620px);
    object-fit:cover;
    opacity:0;
    transition:opacity 900ms ease;
  }
  .ro-hero img.is-active{opacity:1;position:relative}
</style>

<div class="ro-wrap">
  <div class="ro-tagline">
    Minimalist seascapes from Mariager Fjord, Als Odde and Øster Hurup.
  </div>

  {{/* Hent de 5 seneste værker og deres cover-billeder */}}
  {{ $works := where .Site.RegularPages "Section" "works" }}
  {{ $slides := slice }}
  {{ range first 5 (sort $works ".Date" "desc") }}
    {{ $img := false }}
    {{ with .Resources.GetMatch (printf "*%s" (path.Base .Params.cover.image)) }}{{ $img = . }}{{ end }}
    {{ if $img }}
      {{ $w := $img.Resize "2000x q80" }}
      {{ $slides = $slides | append $w.RelPermalink }}
    {{ end }}
  {{ end }}

  {{ if gt (len $slides) 0 }}
    <div class="ro-hero">
      <a class="ro-hero-link" href="{{ "works" | relURL }}" aria-label="Go to Works">
        {{ range $i, $url := $slides }}
          <img class="ro-slide{{ if eq $i 0 }} is-active{{ end }}" src="{{ $url }}" alt="Featured work">
        {{ end }}
      </a>
    </div>
  {{ end }}
</div>

<script>
(function(){
  var slides = document.querySelectorAll('.ro-slide');
  if(!slides.length) return;
  var i = 0;
  setInterval(function(){
    slides[i].classList.remove('is-active');
    i = (i + 1) % slides.length;
    slides[i].classList.add('is-active');
  }, 10000); // 10 sek.
})();
</script>
{{ end }}
