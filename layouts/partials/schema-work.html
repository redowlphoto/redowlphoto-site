{{- $p := .Page -}}
{{- $name := $p.Title -}}
{{- $caption := $p.Params.caption | default "" -}}
{{- $loc := $p.Params.location | default "" -}}
{{- $cover := $p.Params.cover.image | default "" -}}
{{- $coverAbs := "" -}}
{{- with $cover }}
  {{- with $p.Resources.GetMatch (printf "*%s" (path.Base .)) }}
    {{- $coverAbs = .Permalink -}}
  {{- else -}}
    {{- $coverAbs = printf "%s%s/%s" site.BaseURL (path.Dir $p.RelPermalink) (path.Base .) -}}
  {{- end -}}
{{- end }}

<script type="application/ld+json">
[{
  "@context": "https://schema.org",
  "@type": "Photograph",
  "name": {{ $name | safeJS }},
  "headline": {{ $name | safeJS }},
  "abstract": {{ $p.Summary | plainify | safeJS }},
  "inLanguage": {{ $p.Language.LanguageCode | default "en" | safeJS }},
  "url": {{ $p.Permalink | safeJS }},
  "author": { "@type": "Person", "name": "RedOwlPhoto" },
  "copyrightYear": {{ $p.Date.Format "2006" }},
  "dateCreated": {{ $p.Date | time.Format "2006-01-02T15:04:05Z07:00" | safeJS }},
  "datePublished": {{ ($p.PublishDate | default $p.Date) | time.Format "2006-01-02T15:04:05Z07:00" | safeJS }},
  "dateModified": {{ $p.Lastmod | time.Format "2006-01-02T15:04:05Z07:00" | safeJS }},
  "keywords": {{ $p.Params.tags | default slice | jsonify }},
  "mainEntityOfPage": true
},
{
  "@context": "https://schema.org",
  "@type": ["Photograph","ImageObject"],
  "caption": {{ $caption | safeJS }},
  "contentLocation": { "@type": "Place", "name": {{ $loc | safeJS }} },
  "creator": { "@type": "Person", "name": "Allan Andersen", "url": {{ "https://redowlphoto.dk/" | safeJS }} },
  "datePublished": {{ $p.Date.Format "2006-01-02" | safeJS }},
  "genre": ["Minimalist","Seascape","Fine Art"],
  "image": {{ $coverAbs | safeJS }},
  "inLanguage": {{ $p.Language.LanguageCode | default "en" | safeJS }},
  "name": {{ $name | safeJS }},
  "sameAs": ["https://www.instagram.com/redowlphoto/"],
  "url": {{ $p.Permalink | safeJS }},
  "creditText": "Allan Andersen",
  "copyrightNotice": "Â© Allan Andersen / RedOwlPhoto",
  "license": {{ (print site.BaseURL "license/") | safeJS }},
  "acquireLicensePage": {{ (print site.BaseURL "about/") | safeJS }}
}]
</script>
