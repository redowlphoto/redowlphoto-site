{{/* schema-work.html */}}
{{- $img := "" -}}
{{- with .Resources.GetMatch .Params.cover.image -}}
  {{- $img = .Permalink -}}
{{- else if .Params.cover.image -}}
  {{- $img = printf "%s%s" .Permalink .Params.cover.image -}}
{{- end -}}

{{- $abstract := ( .Summary | plainify | default .Params.caption ) -}}
{{- $nowISO := .Date.Format "2006-01-02T15:04:05Z07:00" -}}
{{- $dateY  := .Date.Format "2006" -}}
{{- $lang   := ( .Site.LanguageCode | default "en" ) -}}
{{- $base   := .Site.BaseURL -}}

{{- $article := dict
  "@context" "https://schema.org"
  "@type" "Article"
  "articleSection" "Works"
  "name" .Title
  "headline" .Title
  "abstract" $abstract
  "inLanguage" $lang
  "url" .Permalink
  "image" $img
  "author" (dict "@type" "Person" "name" "RedOwlPhoto" "url" $base)
  "copyrightYear" $dateY
  "dateCreated" $nowISO
  "datePublished" $nowISO
  "dateModified" $nowISO
  "keywords" .Params.tags
  "mainEntityOfPage" true
-}}

{{- $imageObj := dict
  "@context" "https://schema.org"
  "@type" (slice "CreativeWork" "ImageObject")
  "name" .Title
  "url" .Permalink
  "image" $img
  "caption" .Params.caption
  "contentLocation" (dict "@type" "Place" "name" .Params.location)
  "genre" (slice "Minimalist" "Seascape" "Fine Art")
  "datePublished" (.Date.Format "2006-01-02")
  "inLanguage" $lang
  "creator" (dict "@type" "Person" "name" "Allan Andersen" "url" $base)
  "sameAs" (slice "https://www.instagram.com/redowlphoto/")
-}}

<script type="application/ld+json">{{ (slice $article $imageObj) | jsonify | safeHTML }}</script>
